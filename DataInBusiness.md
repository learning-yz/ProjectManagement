数据应用流程思考

# Step1: 生产系统数据库|日志 -> 大数据仓库<br>
|对比项|离线数仓|实时数仓|
| ---- | ---- | ---- |
|数据时效性|T+1|实时|
|计算框架|mr/hive/spark|storm/flink|
|数据吞吐量|批量处理，吞吐量大|流式处理，吞吐量较批量低|
|数据模型|纬度，事实，汇总，星型，雪花等|宽表，轻微汇总层|

* 离线仓库
1. 数据缓冲层(ODS)/复制层(SSA):<br>
    日志|数据库 ---(Flume, Sqoop, Kettle等etl工具)---> HDFS(并映射到数据仓库表)，数据结构与原始数据保持一致，默认保留近30天的数据
2. 数据明细层(DWD)/原子层(SOR):<br>
    事实表:记录具体事件；例如，交易流水表<br>
    维度表(DIM):事实表中事件的要素的描述信息；例如，时间维表，地域维表，商品维表等，有的单独出来作为数据维度层<br>
    主题表:针对主题汇总的表, 货物销量主题表<br>
    DWD层是明细数据，为未来分析类需求的扩展提供历史基础<br>
3. 数据汇总层(DW(B/S))/汇总层(SMA):<br>
    DWB是根据DWD明细数据进行清洗转换, 低粒度汇总<br>
    DWS是根据DWB层数据按照各个维度进行汇总聚合，高粒度汇总<br>
    DW层把DWD层的数据进行合并和汇总，提高数据仓库的查询性能<br>
4. 数据应用层(ADS)/集市层(DM):<br>
    面向应用按需定制，例如前端报表展示<br>

* 数据标准<br>
    数据库表字段命名规范(可能的问题：同一个字段含义但有多个命名，相同的命名有不同的业务含义等)<br>
    数据定义规范<br>
    数据类型规范<br>
    码值管理规范<br>

* 数据质量<br>
    准确性：数据不准确或过期，例如，主键不唯一，数据异常，数据重复<br>
    合规性：数据存储格式是否标准，例如，非法值<br>
    完备性：数据不存在，例如，缺失值<br>
    一致性：数据冲突，例如，数据不一致<br>
    及时性：数据是否及时，例如，数据时间<br>

* 数据安全<br>
    数据权限管理<br>
    数据敏感等级：划分数据安全级别，例如，绝密，机密，秘密，内部，公开<br>
    数据脱敏: 对身份证号，手机号，卡号，客户号等绝密信息进行脱敏，方法有：替换，重排，加密，掩码等<br>

* 其他：数据血缘<br>

# Step2: 维度，指标，标签
* 维度<br>
    维度指人们观察，思考与表述某事物的“思维角度”，例如分行，日期的客户数，这里分行，日期就是维度，客户数是指标，没有维度，单说指标没有意义;

* 指标<br>
    指标是量化的度量值，比如成交量，达标率；<br>
    明确指标定义非常重要<br>

    指标体系构建
    1. 明确部门KPI，找到一级指标
    2. 了解业务运营情况，找到二级指标
    3. 梳理业务流程，找到三级指标
    4. 通过监控指标，不断更新指标体系

    事前调研，事中监控，事中分析，事后分析（比起事后分析，事中分析并及时调整也很重要）<br>
    描述统计指标体系，评价统计指标体系，预警统计指标体系<br>
    
* 标签<br>
    标签获得形式：<br>
        基于统计类的标签：例如，城市，性别，APP使用时长等<br>
        基于规则类的标签：例如，距今90天内交易次数大于3，是“交易活跃”的标签定义<br>
        基于挖掘类的标签：概率模型，概率是介于0~1之间的数值<br>
    标签迭代，标签也有生命周期，根据标签的使用情况也需要更新或者删除<br>
    标签定义：业务口径，IT口径，取值说明，更新频率，应用场景，权限归属等<br>

    标签体系/画像构建
    1. 梳理业务流程(可从用户角度)，从商业目的出发(降低成本/促进交易等)，从策略推标签并汇集
    2. 对标签池进行分类和分级，标签分类可分为人口统计标签，交易标签，资产标签，行为标签等, 分级指明确标签是一级标签，二级标签等
    3. 标签体系维护

# Step3: 应用
* 分析报告<br>
* 产品<br>
    数据基础平台: 调度管理<br>
    数据管理平台: 数据定义，数据标准，数据质量，数据安全<br>
    数据服务平台: 标签系统(人)，资源管理中心（物），埋点系统（产品）<br>
    运营分析平台: 报表（自助|固化），明细查询（自助|固化），可视化，分析框架 <br>
    数据建模平台: 代码建模，可视化建模，半自动建模，全自动建模<br>
    智能推送平台: <br>
    智能营销平台: <br>
    智能推荐平台: <br>
